<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Presentation Slides</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: #f0f0f0;
            color: #333;
            overflow: hidden;
        }

        @keyframes appear {
            0% { 
                opacity: 0;
                transform: translateY(20px);
            }
            100% { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes disappear {
            0% { 
                opacity: 1;
                transform: translateY(0);
            }
            100% { 
                opacity: 0;
                transform: translateY(-20px);
            }
        }

        @keyframes barrelRoll {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .anim {
            animation-duration: 0.8s;
            animation-fill-mode: forwards;
            animation-timing-function: linear;
        }

        .appear { 
            animation-name: appear;
            animation-timing-function: ease-out;
        }
        .disappear { 
            animation-name: disappear;
            animation-timing-function: ease-out;
        }
        .barrel-roll { 
            animation-name: barrelRoll;
            animation-timing-function: linear;
        }

        .slides-container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            padding: 40px;
            opacity: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: white;
            text-align: center;
            pointer-events: none;
        }

        .slide.active {
            opacity: 1;
            pointer-events: all;
        }

        h1 {
            font-size: 3em;
            margin-bottom: 0.5em;
            color: #2c3e50;
        }

        h2 {
            font-size: 2.5em;
            margin-bottom: 0.5em;
            color: #2c3e50;
        }

        p {
            font-size: 1.5em;
            line-height: 1.6;
            margin-bottom: 1em;
        }

        .slide-image {
            max-width: 80%;
            max-height: 60vh;
            object-fit: contain;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .slide-number {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 1.2em;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="slides-container">
        <div class="slide active">
            <h1 class="anim" data-animation="appear">Welcome to the Presentation</h1>
            <p class="anim" data-animation="appear">Use arrow keys to navigate</p>
            <img src="images/magnus.png" class="slide-image anim" data-animation="barrel-roll">
        </div>

        <div class="slide">
            <h2 class="anim" data-animation="appear">Single Image Example</h2>
            <img src="images/siffrin.jpg" class="slide-image anim" data-animation="barrel-roll">
        </div>

        <div class="slide">
            <h2 class="anim" data-animation="appear">Image with Text</h2>
            <p class="anim" data-animation="appear">You can combine images with text descriptions</p>
            <img src="images/magnus.png" class="slide-image anim" data-animation="barrel-roll">
        </div>

        <div class="slide">
            <h2 class="anim" data-animation="appear">Thank You!</h2>
            <img src="images/magnus.png" class="slide-image anim" data-animation="barrel-roll">
            <p class="anim" data-animation="appear">Any questions?</p>
        </div>
    </div>

    <div class="slide-number"></div>

    <script>
        class AnimationQueue {
            constructor(elements) {
                this.elements = elements;
                this.currentIndex = 0;
                this.history = [];
            }

            reset() {
                this.currentIndex = 0;
                this.history = [];
            }

            hasNext() {
                return this.currentIndex < this.elements.length;
            }

            hasPrevious() {
                return this.history.length > 0;
            }

            next() {
                if (this.hasNext()) {
                    const element = this.elements[this.currentIndex];
                    this.history.push(this.currentIndex);
                    this.currentIndex++;
                    return element;
                }
                return null;
            }

            previous() {
                if (this.hasPrevious()) {
                    this.currentIndex = this.history.pop();
                    return this.elements[this.currentIndex];
                }
                return null;
            }

            getAllElements() {
                return this.elements;
            }
        }

        class SlideQueue {
            constructor(slides) {
                this.slides = slides;
                this.currentIndex = 0;
                this.history = [];
                this.animationQueues = new Map();
                
                slides.forEach((slide, index) => {
                    const elements = Array.from(slide.querySelectorAll('.anim'));
                    this.animationQueues.set(index, new AnimationQueue(elements));
                });
            }

            getCurrentSlide() {
                return this.slides[this.currentIndex];
            }

            getCurrentAnimationQueue() {
                return this.animationQueues.get(this.currentIndex);
            }

            next() {
                if (this.currentIndex < this.slides.length - 1) {
                    this.history.push(this.currentIndex);
                    this.currentIndex++;
                    return true;
                }
                return false;
            }

            previous() {
                if (this.history.length > 0) {
                    this.currentIndex = this.history.pop();
                    return true;
                }
                return false;
            }
        }

        class SlideController {
            constructor() {
                this.slides = document.querySelectorAll('.slide');
                this.slideNumber = document.querySelector('.slide-number');
                this.isAnimating = false;
                this.slideQueue = new SlideQueue(Array.from(this.slides));
                this.slideHistory = [];

                this.initializeSlides();
            }

            initializeSlides() {
                this.slides.forEach(slide => {
                    const elements = Array.from(slide.querySelectorAll('.anim'));
                    elements.forEach(element => {
                        if (element.dataset.animation === 'appear' || !element.dataset.animation) {
                            element.style.opacity = '0';
                        }
                    });
                });

                this.showSlide(this.slideQueue.getCurrentSlide());
                const firstQueue = this.slideQueue.getCurrentAnimationQueue();
                firstQueue.reset();
            }

            updateSlideNumber() {
                this.slideNumber.textContent = `${this.slideQueue.currentIndex + 1} / ${this.slides.length}`;
            }

            makeElementsVisible(elements) {
                elements.forEach(element => {
                    if (element.dataset.animation !== 'appear') {
                        element.style.opacity = '1';
                    }
                    element.classList.remove('appear', 'disappear', 'barrel-roll');
                });
            }

            makeElementsInvisible(elements) {
                elements.forEach(element => {
                    element.style.opacity = '0';
                    element.classList.remove('appear', 'disappear', 'barrel-roll');
                });
            }

            async animateElement(element, isAppearing) {
                return new Promise(resolve => {
                    const animation = element.dataset.animation || (isAppearing ? 'appear' : 'disappear');
                    element.classList.remove('appear', 'disappear', 'barrel-roll');
                    
                    if (isAppearing && (animation === 'appear' || !animation)) {
                        element.style.opacity = '0';
                    }
                    
                    element.classList.add(isAppearing ? animation : 'disappear');
                    
                    element.addEventListener('animationend', () => {
                        element.style.opacity = isAppearing ? '1' : '0';
                        resolve();
                    }, { once: true });
                });
            }

            showSlide(slide) {
                this.slides.forEach(s => s.classList.remove('active'));
                slide.classList.add('active');
                this.updateSlideNumber();
            }

            async handleForward() {
                if (this.isAnimating) return;
                this.isAnimating = true;

                const currentQueue = this.slideQueue.getCurrentAnimationQueue();
                
                if (currentQueue.hasNext()) {
                    const element = currentQueue.next();
                    await this.animateElement(element, true);
                } else {
                    if (this.slideQueue.next()) {
                        const oldElements = currentQueue.getAllElements();
                        await Promise.all(oldElements.map(el => this.animateElement(el, false)));
                        
                        this.showSlide(this.slideQueue.getCurrentSlide());
                        const newQueue = this.slideQueue.getCurrentAnimationQueue();
                        newQueue.reset();
                        
                        const newElements = newQueue.getAllElements();
                        newElements.forEach(element => {
                            if (element.dataset.animation !== 'appear') {
                                element.style.opacity = '1';
                            } else {
                                element.style.opacity = '0';
                            }
                        });
                    }
                }

                this.isAnimating = false;
            }

            async handleBackward() {
                if (this.isAnimating) return;
                this.isAnimating = true;

                const currentQueue = this.slideQueue.getCurrentAnimationQueue();
                
                if (currentQueue.hasPrevious()) {
                    const elements = currentQueue.getAllElements();
                    const lastAnimatedIndex = currentQueue.currentIndex - 1;
                    const elementToHide = elements[lastAnimatedIndex];
                    await this.animateElement(elementToHide, false);
                    currentQueue.previous();
                } else {
                    if (this.slideQueue.previous()) {
                        const currentElements = currentQueue.getAllElements();
                        this.makeElementsInvisible(currentElements);
                        
                        this.showSlide(this.slideQueue.getCurrentSlide());
                        const previousQueue = this.slideQueue.getCurrentAnimationQueue();
                        
                        const previousElements = previousQueue.getAllElements();
                        const visibleElements = previousElements.slice(0, previousQueue.currentIndex);
                        this.makeElementsVisible(visibleElements);
                        
                        const hiddenElements = previousElements.slice(previousQueue.currentIndex);
                        this.makeElementsInvisible(hiddenElements);
                    }
                }

                this.isAnimating = false;
            }
        }

        const controller = new SlideController();

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === 'Space') {
                controller.handleForward();
            } else if (e.key === 'ArrowLeft') {
                controller.handleBackward();
            }
        });

        document.querySelectorAll('img').forEach(img => {
            img.onerror = function() {
                this.style.display = 'none';
                let errorText = document.createElement('p');
                errorText.textContent = '(Place your image here: ' + this.getAttribute('src') + ')';
                errorText.style.color = '#666';
                errorText.style.fontStyle = 'italic';
                this.parentNode.insertBefore(errorText, this.nextSibling);
            };
        });
    </script>
</body>
</html> 